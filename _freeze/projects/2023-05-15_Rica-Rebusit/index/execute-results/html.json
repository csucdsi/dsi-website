{
  "hash": "919b67e8aa1cac0b4d2d749eb97cb19e",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat: html\nauthor: Rica Rebusit\ntitle: Predicting Activity Priorities with Machine Learning\n---\n<!-- Thumbnail image - set width to 0% to hide from preview -->\n<img src=\"img/thumbnail.png\" alt=\"Random Forest + CHC logo\" style=\"float: center;\" width=\"20%\"/>\n\nMy capstone project focused on using machine learning to predict activity priorities for Chico State's [Center for Healthy Communities](https://chcchicostate.org/) (CHC) based on text descriptions. The CHC is a non-profit organization that promotes food security, nutrition education, and various community health initiatives.\n\nThe challenge was to develop a system that could automatically classify activities by priority level, helping the organization optimize resource allocation and better serve campus partners.\n\n## Project Goal\n\nThe Center for Healthy Communities conducts numerous activities and programs throughout the year. Understanding which activities should be prioritized is crucial for effective resource management and maximizing community impact.\n\n**The goal:** Build a machine learning model that predicts activity priority based on text descriptions, using:\n\n- **Latent Dirichlet Allocation (LDA)** for topic modeling and feature extraction\n- **Random Forest** for classification and priority prediction\n- Natural language processing techniques for text preprocessing\n\n## The Technical Approach\n\n::: {.panel-tabset}\n\n### Data Preprocessing\n\nThe first step involved cleaning and preparing the activity description data. This included removing special characters, standardizing text format, and handling missing values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required libraries\nlibrary(tidyverse)\nlibrary(tm)\nlibrary(tokenizers)\n\n# Data cleaning function\nclean_text <- function(text) {\n  text %>%\n    tolower() %>%                           # Convert to lowercase\n    str_replace_all(\"[[:punct:]]\", \" \") %>% # Remove punctuation\n    str_replace_all(\"\\\\s+\", \" \") %>%        # Normalize whitespace\n    str_trim()                               # Trim leading/trailing spaces\n}\n\n# Apply cleaning to activity descriptions\ndf_clean <- df %>%\n  mutate(descrip_clean = clean_text(descrip))\n```\n:::\n\n\n### Tokenization\n\nBreaking down text into meaningful tokens is essential for text analysis. This process converts sentences into individual words while removing common stopwords.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidytext)\n\n# Tokenize and remove stopwords\ntokens <- df_clean %>%\n  unnest_tokens(word, descrip_clean) %>%\n  anti_join(stop_words) %>%\n  filter(!str_detect(word, \"^\\\\d+$\"))  # Remove numbers\n\n# Create document-term matrix\ndtm <- tokens %>%\n  count(activity_id, word) %>%\n  cast_dtm(activity_id, word, n)\n```\n:::\n\n\n### LDA Topic Modeling\n\nLDA discovers hidden topics within the activity descriptions, creating new features for the classification model.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(topicmodels)\n\n# Fit LDA model with 5 topics\nlda_model <- LDA(\n  dtm,\n  k = 5,                    # Number of topics\n  method = \"Gibbs\",\n  control = list(\n    seed = 123,\n    burnin = 1000,\n    iter = 2000,\n    thin = 100\n  )\n)\n\n# Extract topic probabilities for each activity\ntopic_probs <- posterior(lda_model)$topics %>%\n  as.data.frame() %>%\n  rename_with(~paste0(\"topic_\", 1:5))\n\n# View top words for each topic\nterms(lda_model, 10)\n```\n:::\n\n\n### Random Forest Model\n\nThe Random Forest classifier uses the extracted topics and other features to predict activity priorities.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(randomForest)\nlibrary(caret)\n\n# Combine features: topics + other variables\nmodel_data <- df %>%\n  bind_cols(topic_probs) %>%\n  select(priority, shortcode, quarter, topic_1:topic_5,\n         train_meet, partner, level)\n\n# Split data into training and testing sets\nset.seed(123)\ntrain_index <- createDataPartition(model_data$priority,\n                                   p = 0.8,\n                                   list = FALSE)\ntrain_data <- model_data[train_index, ]\ntest_data <- model_data[-train_index, ]\n\n# Train Random Forest model\nrf_model <- randomForest(\n  priority ~ .,\n  data = train_data,\n  ntree = 500,\n  mtry = 3,\n  importance = TRUE\n)\n\n# Make predictions\npredictions <- predict(rf_model, test_data)\n\n# Evaluate model performance\nconfusionMatrix(predictions, test_data$priority)\n```\n:::\n\n\n:::\n\n## Key Variables\n\nThe project utilized several important variables to predict activity priorities:\n\n- **shortcode**: Brief identifier for the activity type\n- **quarter**: Academic term (Fall, Spring, Summer)\n- **contract_year**: Fiscal year of the activity\n- **train_meet**: Type of training or meeting conducted\n- **partner**: Campus or community partner organization\n- **descrip**: Full text description of the activity\n- **level**: Activity complexity or engagement level\n- **topic_1 to topic_5**: Probability distributions from LDA topic modeling\n\n## Impact & Applications\n\n::: {.callout-note appearance=\"default\"}\n## Question\n\n**How does this project make a difference for the Center for Healthy Communities?**\n:::\n\n::: {.callout-tip appearance=\"default\"}\n## Answer\n\n**Resource Optimization:** Enables data-driven decisions about where to allocate staff time and budget.\n\n**Strategic Planning:** Provides insights into which activity types have historically been high-priority, informing future programming.\n\n**Scalability:** Automates the classification process as CHC expands its programs, saving time on manual categorization.\n\n**Evidence-Based Decision Making:** Helps stakeholders understand activity impacts through quantitative analysis rather than intuition alone.\n:::\n\n## Platforms & Tools Used\n\n- **R and RStudio**: Primary environment for data analysis and model development\n- **tidyverse**: Data manipulation and visualization\n- **tm & tidytext**: Text mining and natural language processing\n- **topicmodels**: Latent Dirichlet Allocation implementation\n- **randomForest**: Machine learning classification\n- **caret**: Model training and evaluation\n- **Quarto**: Reproducible research and documentation\n- **GitHub**: Version control and collaboration\n\n## Lessons Learned\n\nWorking on this project taught me several valuable lessons about applied machine learning:\n\n- **Data Quality Matters**: Text data requires extensive cleaning and preprocessing. The quality of your model is only as good as the quality of your input data.\n\n- **Feature Engineering is Crucial**: LDA topic modeling transformed unstructured text into meaningful features that significantly improved model performance.\n\n- **Iterate and Refine**: The initial cleaning and tokenization process needed several iterations to handle edge cases and improve accuracy.\n\n- **Balance Complexity and Interpretability**: While more complex models might offer marginal accuracy gains, Random Forest provided a good balance of performance and interpretability for stakeholders.\n\n## Future Enhancements\n\nSeveral opportunities exist to expand and improve this project:\n\n1. **More Labeled Data**: Collecting additional labeled examples would improve model accuracy and generalizability.\n\n2. **Model Comparison**: Evaluate alternative algorithms like XGBoost, Support Vector Machines, or neural networks.\n\n3. **Real-Time Deployment**: Create a Shiny application or API for real-time priority predictions.\n\n4. **Hyperparameter Tuning**: Systematic optimization of model parameters using grid search or Bayesian optimization.\n\n5. **Cross-Validation**: Implement k-fold cross-validation for more robust performance estimates.\n\n## About the Repository\n\nThe complete project code is available on [GitHub](https://github.com/DATA-490/2023-rica-rebusit) and includes:\n\n- `scripts/LDA.qmd`: Data cleaning, preprocessing, and topic modeling\n- `scripts/Random_Forest.qmd`: Model training and evaluation\n- `documentations/`: Meeting notes and project documentation\n- `presentation/`: Poster and stakeholder reports\n\n::: {.callout-warning appearance=\"default\"}\n**Note:** Access to the project data requires permission from the Center for Healthy Communities to protect sensitive program information.\n:::\n\n---\n\n*Thank you to Robin Donatello, the Chico State Mathematics and Statistics Department, and the Center for Healthy Communities team for their guidance and support throughout this project!*\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}